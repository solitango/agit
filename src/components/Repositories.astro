---
import { Effect } from "effect";

import { Git, runWithAstro } from "~/services/Git";

/* Init */
const git = Effect.serviceMembers(Git);

/* Data */
const repositories = await git.constants.listRepositories.pipe(runWithAstro);
---

<ul class="mt-6 flex flex-col gap-4 list-disc pl-4 border-border">
  {
    repositories.map((repo) => (
      <li>
        <a
          class="text-link underline"
          href={`/repository/${repo.name}/commits?callbackCommit=HEAD`}
        >
          {repo.name}
        </a>
        <p>{repo.description}</p>
      </li>
    ))
  }
</ul>
