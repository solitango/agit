---
import { Effect } from "effect";

import { Git, runWithAstro } from "~/services/Git";

/* Init */
interface Props {
  repository: string;
  commit: string;
}

const { repository, commit } = Astro.props;

const git = Effect.serviceMembers(Git);

/* Data */
const diff = await git.functions.getDiff(repository, commit).pipe(runWithAstro);
---

<pre
  class="text-[0.9rem] p-2 w-full overflow-x-scroll"><code set:text={diff} /></pre>
